<!doctype html>
<html class="no-js" lang="en">


<!-- Mirrored from template.hasthemes.com/toro/toro/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Feb 2024 11:20:00 GMT -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>PFUME</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/user/assets/images/favicon.png">

    <!-- All CSS is here
	============================================ -->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/user/assets/css/vendor/bootstrap.min.css">
    <!-- Icon Font CSS -->
    <link rel="stylesheet" href="/user/assets/css/vendor/font-awesome.css">
    <link rel="stylesheet" href="/user/assets/css/vendor/dlicon.css">
    <!-- Others CSS -->
    <link rel="stylesheet" href="/user/assets/css/plugins/owl-carousel.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/slick.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/magnific-popup.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/jarallax.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/easyzoom.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/animate.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/fullpage.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/jquery-ui.css">
    <link rel="stylesheet" href="/user/assets/css/plugins/select2.min.css">
    <link rel="stylesheet" href="/user/assets/css/style.css">
    <style>
        .address-container {
            display: flex;
            gap: 2rem;
            /* Adds space between columns */
        }

        .address-info {
            flex: 1;
            /* Left column for current address */
        }

        .address-form {
            flex: 1;
            /* Right column for form */
            border-left: 1px solid #ddd;
            padding-left: 2rem;
        }

        .single-input-item {
            margin-bottom: 1rem;
        }

        .check-btn {
            background-color: #333;
            color: #fff;
            padding: 0.5rem 1rem;
            border: none;
            cursor: pointer;
            text-align: center;
            display: inline-block;
        }

        .check-btn:hover {
            background-color: #555;
        }
    </style>
</head>

<body>

    <div class="main-wrapper">
        <header class="header-area section-padding-1">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-xl-2 col-lg-2">
                        <div class="logo logo-width">
                            <a href="index.html">
                                <img src="/user/assets/images/logo/logo.png" alt="logo">
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-8 col-lg-8 d-flex justify-content-center position-static">
                        <div class="main-menu menu-lh-1 main-menu-padding-1">
                            <nav>
                                <ul>
                                    <li class="position-static"><a href="/user/home">Home </i></a>
                                    </li>

                                    <li><a href="/user/shop">Shop </i></a>
                                        
                                    </li>
                                    <!-- <li><a href="shop-collection-1.html">Collections </i> </a>
                                        <ul class="sub-menu-width">
                                            <li><a href="shop-collection-1.html">Shop Collection 01</a></li>
                                            <li><a href="shop-collection-2.html">Shop Collection 02</a></li>
                                            <li><a href="shop-metro.html">Shop Metro Layout</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="/user/myaccount">My Profile </i></a>
                                    </li>
                                    <li><a href="shop-instagram.html">Instagram Shop </a></li> -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-2">
                        <div class="header-right-wrap header-right-flex">
                            <div class="same-style header-wishlist">
                                <a href="/user/wishlist"><i class="fa fa-heart-o"></i></a>
                            </div>
                            <div class="same-style cart-wrap">
                                <a href="/user/cart" >
                                    <i class="dlicon shopping_bag-20"></i>
                                    <span class="count-style"><%= cartItemNo%></span>
                                </a>
                            </div>
                            <div class="same-style header-search">
                                <a class="search-active" href="#">
                                    <i class="dlicon ui-1_zoom"></i>
                                </a>
                            </div>
                            <div class="same-style header-off-canvas">
                                <a class="header-aside-button" href="#">
                                    <i class="dlicon ui-3_menu-left"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="header-small-mobile section-padding-1">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-6">
                        <div class="mobile-logo logo-width">
                            <a href="index.html">
                                <img alt="" src="/user/assets/images/logo/logo.png">
                            </a>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="mobile-header-right-wrap">
                            <div class="header-right-wrap header-right-flex">
                                <div class="same-style cart-wrap">
                                    <a href="/user/cart">
                                        <i class="dlicon shopping_bag-20"></i>
                                        <span class="count-style"><%= cartItemNo%></span>
                                    </a>
                                </div>
                                <div class="same-style header-off-canvas">
                                    <a class="header-aside-button" href="#">
                                        <i class="dlicon ui-3_menu-left"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- search start -->
        <div class="search-content-wrap main-search-active">
            <a class="search-close"><i class="dlicon ui-1_simple-remove"></i></a>
            <div class="search-content">
                <p>Start typing and press Enter to search</p>
                <form class="search-form" action="#">
                    <input type="text" placeholder="Search">
                    <button class="button-search"><i class="dlicon ui-1_zoom"></i></button>
                </form>
            </div>
        </div>
        <!-- mini cart start -->
        <div class="sidebar-cart-active">
            <div class="sidebar-cart-all">
                <a class="cart-close" href="#"><i class="dlicon ui-1_simple-remove"></i></a>
                <div class="cart-content">
                    <h3>Shopping Cart</h3>
                    <ul>
                        <li class="single-product-cart">
                            <div class="cart-img">
                                <a href="#"><img src="/user/assets/images/cart/cart-1.jpg" alt=""></a>
                            </div>
                            <div class="cart-title">
                                <h4><a href="#">Bejewelled velvet sandals</a></h4>
                                <span> 1 × $49.00 </span>
                            </div>
                            <div class="cart-delete">
                                <a href="#">×</a>
                            </div>
                        </li>
                        <li class="single-product-cart">
                            <div class="cart-img">
                                <a href="#"><img src="/user/assets/images/cart/cart-2.jpg" alt=""></a>
                            </div>
                            <div class="cart-title">
                                <h4><a href="#">Contrast faux fur jacket</a></h4>
                                <span> 1 × $49.00 </span>
                            </div>
                            <div class="cart-delete">
                                <a href="#">×</a>
                            </div>
                        </li>
                    </ul>
                    <div class="cart-total">
                        <h4>Subtotal: <span>$170.00</span></h4>
                    </div>
                    <div class="cart-checkout-btn">
                        <a class="btn-hover cart-btn-style" href="/user/cart">view cart</a>
                        <a class="no-mrg btn-hover cart-btn-style" href="checkout.html">checkout</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- aside start -->
        <div class="header-aside-active">
            <div class="header-aside-wrap">
                <a class="aside-close"><i class="dlicon ui-1_simple-remove"></i></a>
                <div class="header-aside-content">
                    <div class="mobile-menu-area">
                        <div class="mobile-search">
                            <form class="search-form" action="#">
                                <input type="text" placeholder="Search entire store…">
                                <button class="button-search"><i class="dlicon ui-1_zoom"></i></button>
                            </form>
                        </div>
                        <div class="mobile-menu-wrap">
                            <!-- mobile menu start -->
                            <div class="mobile-navigation">
                                <!-- mobile menu navigation start -->
                                <nav>
                                    <ul class="mobile-menu">
                                        <li class="menu-item-has-children"><a href="/user/home">Home</a>

                                        </li>
                                        <li class="menu-item-has-children "><a href="/user/shop">Shop</a>
                                        </li>
                                        <li><a href="/user/logout">Log Out </a></li>
                                    </ul>
                                </nav>
                                <!-- mobile menu navigation end -->
                            </div>
                            <!-- mobile menu end -->
                        </div>
                        <div class="mobile-curr-lang-wrap">
                            <div class="single-mobile-curr-lang">
                                <a class="mobile-language-active" href="#">Language <i class="fa fa-angle-down"></i></a>
                                <div class="lang-curr-dropdown lang-dropdown-active">
                                    <ul>
                                        <li><a href="#">English (US)</a></li>
                                        <li><a href="#">English (UK)</a></li>
                                        <li><a href="#">Spanish</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="single-mobile-curr-lang">
                                <a class="mobile-currency-active" href="#">Currency <i class="fa fa-angle-down"></i></a>
                                <div class="lang-curr-dropdown curr-dropdown-active">
                                    <ul>
                                        <li><a href="#">USD</a></li>
                                        <li><a href="#">EUR</a></li>
                                        <li><a href="#">Real</a></li>
                                        <li><a href="#">BDT</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="single-mobile-curr-lang">
                                <a class="mobile-account-active" href="#">My Account <i
                                        class="fa fa-angle-down"></i></a>
                                <div class="lang-curr-dropdown account-dropdown-active">
                                    <ul>
                                        <li><a href="#">Login</a></li>
                                        <li><a href="#">Creat Account</a></li>
                                        <li><a href="my-account.html">My Account</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="header-aside-menu">
                        <nav>
                            <ul>
                                <li><a href="/user/myaccount">My Account</a></li>
                                <li><a href="/user/shop">Shop</a></li>
                                <!-- <li><a href="#">Collection</a></li>
                                <li><a href="#">Blog</a></li>
                                <li><a href="#">New Look</a></li> -->
                                <li><a href="/user/logout">Log Out</a></li>
                            </ul>
                        </nav>
                    </div>
                    <img src="/user/assets/images/icon-img/payments.png" alt="payment">
                    <p>Pellentesque mollis nec orci id tincidunt. Sed mollis risus eu nisi aliquet, sit amet fermentum
                        justo dapibus.</p>
                    <div class="aside-contact-info">
                        <ul>
                            <li><i class="dlicon ui-2_time-clock"></i>Monday - Friday: 9:00 - 19:00</li>
                            <li><i class="dlicon ui-1_email-84"></i>Info@la-studioweb.com</li>
                            <li><i class="dlicon tech-2_rotate"></i>(+55) 254. 254. 254</li>
                            <li><i class="dlicon ui-1_home-minimal"></i>Helios Tower 75 Tam Trinh Hoang - Ha Noi - Viet
                                Nam</li>
                        </ul>
                    </div>
                    <div class="social-icon-style mb-25">
                        <a class="facebook" href="#"><i class="fa fa-facebook"></i></a>
                        <a class="twitter" href="#"><i class="fa fa-twitter"></i></a>
                        <a class="google-plus" href="#"><i class="fa fa-google-plus"></i></a>
                        <a class="behance" href="#"><i class="fa fa-behance"></i></a>
                    </div>
                    <div class="copyright">
                        <p>© 2021 <a href="https://hasthemes.com/">Toro.</a> All rights reserved</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="breadcrumb-area section-padding bg-gray breadcrumb-ptb-1">
            <div class="container-fluid">
                <div class="breadcrumb-content text-center">
                    <div class="breadcrumb-title">
                        <h2>Manage Address</h2>
                        <ul>
                            <li>
                                <a href="/user/home">Home </a>
                            </li>
                            <li><span> &gt; </span></li>
                            <li>
                                <a href="/user/myaccount">My Account </a>
                            </li>
                            <li><span> &gt; </span></li>
                            <li class="active"> Address </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="single-input-item" style="display: flex; justify-content: flex-end;padding-top: 10px; ">
            <a href="/user/myaccount" class="check-btn sqr-btn" style="margin-right: 250px;">My account</a>
        </div>



        <div class="my-account-area pt-100 pb-95">
            <div class="tab-content" id="myaccountContent">
                <!-- Single Tab Content Start -->

                <div class="myaccount-content container">
                    <div class="row">
                        <!-- Left Side: Display Address -->
                        <div class="col-lg-6">
                            <h3>Address Information</h3>
                            <address>
                                <% if(address&& address.addressDetails && address.addressDetails.length> 0){ %>
                                    <% address.addressDetails.forEach(address=> { %>
                                        <p>
                                            <%= address.name%>
                                        </p>

                                        <p>
                                            <%= address.address%>,<%= address.city %><br>
                                                    <%=address.state %>, <%= address.pincode %>
                                        </p>
                                        <p>
                                            <%= address.country %>
                                        </p>
                                        <p>
                                            <%= address.phone  %>
                                        </p>
                                        <div class="d-flex">
                                            <a href="#" class="check-btn sqr-btn edit-address-btn me-2" data-id="<%= address._id %>" data-address="<%= JSON.stringify(address) %>">
                                                <i class="fa fa-edit"></i> Edit Address
                                            </a>
                                        
                                            <a href="#" class="text-danger ms-auto" data-id="<%= address._id %>">
                                                <i class="fa fa-trash"></i> Delete Address
                                            </a>
                                            
                                        </div>
                                        
                                        
                                        
                                        <hr>
                                        <% }) %>
                                            <% } else {%>
                                                <p>No address to show</p>
                                                <% }%>

                            </address>

                        </div>

                        <!-- Right Side: Address Form for Adding/Editing -->
                        <div class="col-lg-6">
                            <h3>Add / Edit Address</h3>
                            <br>
                            <form id="address-form">
                                <input type="hidden" id="address-id" value="">
                                <div class="single-input-item">
                                    <label for="name" class="required">Name</label>
                                    <input type="text" name="name" id="name" placeholder="Enter name" />
                                    <span id="name-error" class="error-message" style="color: red;"></span>
                                </div>
                                <div class="single-input-item">
                                    <label for="address" class="required">Address</label>
                                    <input type="text" name="address" id="address" placeholder="Enter address" />
                                    <span id="address-error" class="error-message" style="color: red;"></span>
                                </div>
                                <div class="single-input-item">
                                    <label for="city" class="required">City</label>
                                    <input type="text" name="city" id="city" placeholder="Enter city" />
                                    <span id="city-error" class="error-message" style="color: red;"></span>
                                </div>
                                <div class="single-input-item">
                                    <label for="state" class="required">State</label>
                                    <input type="text" name="state" id="state" placeholder="Enter state" />
                                    <span id="state-error" class="error-message" style="color: red;"></span>
                                </div>
                                <div class="single-input-item">
                                    <label for="zip" class="required">Zip Code</label>
                                    <input type="text" name="pincode" id="zip" placeholder="Enter zip code" />
                                    <span id="zip-error" class="error-message" style="color: red;"></span>
                                </div>
                                <div class="single-input-item">
                                    <label for="country" class="required">Country</label>
                                    <input type="text" name="country" id="country" placeholder="Enter country" />
                                    <span id="country-error" class="error-message" style="color: red;"></span>
                                </div>
                                <div class="single-input-item">
                                    <label for="phone" class="required">Mobile No</label>
                                    <input type="text" name="phone" id="phone" placeholder="Enter phone number" />
                                    <span id="phone-error" class="error-message" style="color: red;"></span>
                                </div>
                                <div class="single-input-item">
                                    <button type="submit" id="save-address" class="check-btn sqr-btn">Save Address</button>
                                </div>
                            </form>
                        </div>
                        
                    </div>
                </div>



            </div>
        </div>
        
        <footer class="footer-area section-padding-1 border-top-3">
            <div class="container-fluid">
                <div class="footer-top pt-100 pb-60">
                    <div class="row">
                        <div class="footer-column footer-width-24">
                            <div class="footer-widget footer-about mb-30">
                                <a href="index.html">
                                    <img src="/user/assets/images/logo/logo.png" alt="logo">
                                </a>
                                <p>Lorem ipsum dolor sit amet, magna habemus ius ad, qui minimum voluptar</p>
                                <div class="social-icon-style-2 social-icon-hm4">
                                    <a class="facebook" href="#"><i class="fa fa-facebook"></i></a>
                                    <a class="twitter" href="#"><i class="fa fa-twitter"></i></a>
                                    <a class="youtube" href="#"><i class="fa fa-youtube"></i></a>
                                    <a class="dribbble" href="#"><i class="fa fa-dribbble"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="footer-column footer-width-12">
                            <div class="footer-widget footer-info-list-2 mb-30">
                                <h3 class="footer-title">Company Link</h3>
                                <ul>
                                    <li><a href="#">About Us</a></li>
                                    <li><a href="#">Help Center</a></li>
                                    <li><a href="#">Our Team</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                    <li><a href="#">The Blog</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="footer-column footer-width-14">
                            <div class="footer-widget footer-info-list-2 mb-30">
                                <h3 class="footer-title">Userful Link</h3>
                                <ul>
                                    <li><a href="#">Guides & Articles</a></li>
                                    <li><a href="#">Customer Reviews</a></li>
                                    <li><a href="#">Coupon Codes</a></li>
                                    <li><a href="#">Military Discount</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="footer-column footer-width-19">
                            <div class="footer-widget footer-info-list-2 footer-contect mb-30">
                                <h3 class="footer-title">Contact info</h3>
                                <ul>
                                    <li><i class="dlicon ui-2_time-clock"></i> Monday - Friday: 9:00 - 19:00</li>
                                    <li><i class="dlicon ui-1_email-83"></i> info@example.com</li>
                                    <li><i class="dlicon tech-2_rotate"></i> (+612) 2531 5600</li>
                                    <li><i class="dlicon ui-1_home-simple"></i> PO Box 1622 Colins Street West Victoria
                                        8077 Australia</li>
                                </ul>
                            </div>
                        </div>
                        <div class="footer-column footer-width-29 mb-30">
                            <div class="contact-page-map">
                                <div id="contact-map">
                                    <iframe
                                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3151.838709675939!2d144.95320007668528!3d-37.817246734238516!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6ad65d4dd5a05d97%3A0x3e64f855a564844d!2s121%20King%20St%2C%20Melbourne%20VIC%203000%2C%20Australia!5e0!3m2!1sen!2sus!4v1670477011653!5m2!1sen!2sus"
                                        style="border:0;width:100%;height:100%;" allowfullscreen=""
                                        loading="lazy"></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-botoom">
                    <div class="row">
                        <div class="col-12">
                            <div class="copyright-2 text-center">
                                <p>© 2021 <a href="https://hasthemes.com/">Toro.</a> All rights reserved.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <div class="support-lists">
            <ul>
                <li><a href="#"><i class="dlicon ui-3_chat-46"></i></a></li>
                <li><a href="#"><i class=" dlicon ui-3_phone"></i></a></li>
                <li><a href="#"><i class="dlicon ui-1_email-85"></i></a></li>
            </ul>
        </div>
    </div>

    <!-- All JS is here
============================================ -->

    <!-- Modernizer JS -->
    <script src="/user/assets/js/vendor/modernizr-3.11.7.min.js"></script>
    <!-- jquery -->
    <script src="/user/assets/js/vendor/jquery-v3.6.0.min.js"></script>
    <!-- Popper JS -->
    <script src="/user/assets/js/vendor/popper.js"></script>
    <!-- Bootstrap JS -->
    <script src="/user/assets/js/vendor/bootstrap.min.js"></script>
    <script src="/user/assets/js/plugins/owl-carousel.js"></script>
    <script src="/user/assets/js/plugins/slick.js"></script>
    <script src="/user/assets/js/plugins/jarallax.min.js"></script>
    <script src="/user/assets/js/plugins/countdown.js"></script>
    <script src="/user/assets/js/plugins/magnific-popup.js"></script>
    <script src="/user/assets/js/plugins/instafeed.js"></script>
    <script src="/user/assets/js/plugins/tilt.js"></script>
    <script src="/user/assets/js/plugins/images-loaded.js"></script>
    <script src="/user/assets/js/plugins/isotope.js"></script>
    <script src="/user/assets/js/plugins/scrolloverflow-fullpage.js"></script>
    <script src="/user/assets/js/plugins/fullpage.js"></script>
    <script src="/user/assets/js/plugins/jquery-ui.js"></script>
    <script src="/user/assets/js/plugins/jquery-ui-touch-punch.js"></script>
    <script src="/user/assets/js/plugins/easyzoom.js"></script>
    <script src="/user/assets/js/plugins/resizesensor.js"></script>
    <script src="/user/assets/js/plugins/sticky-sidebar.js"></script>
    <script src="/user/assets/js/plugins/scrollup.js"></script>
    <script src="/user/assets/js/plugins/select2.min.js"></script>
    <script src="/user/assets/js/plugins/cookie.js"></script>
    <script src="/user/assets/js/plugins/bpopup.js"></script>
    <script src="/user/assets/js/plugins/wow.js"></script>
    <script src="/user/assets/js/plugins/ajax-mail.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Main JS -->
    <script src="/user/assets/js/main.js"></script>

    <script>
        document.querySelectorAll('.edit-address-btn').forEach(button => {
    button.addEventListener('click', function(event) {
        event.preventDefault();

      
        const addressData = JSON.parse(this.getAttribute('data-address'));

     
        document.getElementById('address-id').value = addressData._id;
        document.getElementById('name').value = addressData.name || '';
        document.getElementById('address').value = addressData.address || '';
        document.getElementById('city').value = addressData.city || '';
        document.getElementById('state').value = addressData.state || '';
        document.getElementById('zip').value = addressData.pincode || '';
        document.getElementById('country').value = addressData.country || '';
        document.getElementById('phone').value = addressData.phone || '';
    }); 
});

document.getElementById('save-address').addEventListener('click', function (event) {
    event.preventDefault();

    const addressId = document.getElementById('address-id').value;
    const name = document.getElementById('name').value.trim();
    const address = document.getElementById('address').value.trim();
    const city = document.getElementById('city').value.trim();
    const state = document.getElementById('state').value.trim();
    const pincode = document.getElementById('zip').value.trim();
    const country = document.getElementById('country').value.trim();
    const phone = document.getElementById('phone').value.trim();

    function showError(inputId, message) {
        const errorSpan = document.getElementById(`${inputId}-error`);
        if (errorSpan) errorSpan.textContent = message;
    }

    document.querySelectorAll('.error-message').forEach(span => span.textContent = '');

    if (!name) return showError('name', "Name is required.");
    if (!address) return showError('address', "Address is required.");
    if (!city) return showError('city', "City is required.");
    if (!state) return showError('state', "State is required.");
    if (!pincode) {
        showError('zip', "Zip code is required.");
        return;
    }
    if (isNaN(pincode) || pincode.length < 5 || pincode.length > 10) {
        showError('zip', "Zip code should be a number between 5 to 10 digits.");
        return;
    }
    if (!country) return showError('country', "Country is required.");
    if (!phone) {
        showError('phone', "Phone number is required.");
        return;
    }
    if (isNaN(phone) || phone.length < 10 || phone.length > 15) {
        showError('phone', "Phone number should be a numeric value between 10 to 15 digits.");
        return;
    }

    const addressData = { name, address, city, state, pincode, country, phone };
    const url = addressId ? `/user/editaddress/${addressId}` : '/user/addaddress';
    const method = addressId ? 'PUT' : 'POST';

    fetch(url, {
        method: method,
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(addressData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            Swal.fire({
                title: 'Success!',
                text: addressId ? "Address updated successfully." : "Address added successfully.",
                icon: 'success',
                confirmButtonText: 'OK'
            }).then(() => {
                location.reload();
            });
        } else {
            Swal.fire({
                title: 'Error!',
                text: data.message || "Failed to save address.",
                icon: 'error',
                confirmButtonText: 'OK'
            });
        }
    })
    .catch(error => {
        console.error("Error saving address:", error);
        Swal.fire({
            title: 'Error!',
            text: "An error occurred while saving the address.",
            icon: 'error',
            confirmButtonText: 'OK'
        });
    });
});

document.querySelectorAll('.single-input-item').forEach(item => {
    const input = item.querySelector('input');
    if (input) {
        const errorSpan = document.createElement('span');
        errorSpan.id = `${input.id}-error`;
        errorSpan.className = 'error-message';
        errorSpan.style.color = 'red';
        item.appendChild(errorSpan);
    }
});

document.querySelectorAll('.text-danger').forEach(function(button) {
    button.addEventListener('click', function (event) {
        event.preventDefault(); 
        
        var addressId = button.getAttribute('data-id');
        console.log("Address ID to delete:", addressId);

        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: 'Cancel',
        }).then((result) => {
            if (result.isConfirmed) {
                fetch(`/user/deleteaddress/${addressId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire({
                            title: 'Deleted!',
                            text: "Address deleted successfully.",
                            icon: 'success',
                            confirmButtonText: 'OK'
                        }).then(() => {
                            location.reload(); 
                        });
                    } else {
                        Swal.fire({
                            title: 'Error!',
                            text: data.message || "Failed to delete address.",
                            icon: 'error',
                            confirmButtonText: 'OK'
                        });
                    }
                })
                .catch(error => {
                    console.error("Error deleting address:", error);
                    Swal.fire({
                        title: 'Error!',
                        text: "An error occurred while deleting the address.",
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                });
            }
        });
    });
});


    </script>


</body>


<!-- Mirrored from template.hasthemes.com/toro/toro/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Feb 2024 11:20:00 GMT -->

</html>